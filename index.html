<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React logs</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <link rel="stylesheet" href="logs.css">
</head>

<body>
    <div id="app"></div>
</body>
<script type="text/babel">
    const app = document.querySelector('#app')
    const node = ReactDOM.createRoot(app)
    const viewportHeight = window.innerHeight || document.documentElement.clientHeight;
    const useState = React.useState;
    const useEffect = React.useEffect;
    const initInput = [
        {
            label: '日期',
            type: 'date',
            option: 'data'
        },
        {
            label: '内容',
            type: 'text',
            option: 'content'
        },
        {
            label: '时长',
            type: 'text',
            option: 'time'
        }
    ]

    let App = () => {
        return (
            <div className="logs" style={{ height: (viewportHeight) + 'px' }}>
                <LogsCard />
            </div>
        )
    }



    let LogsCard = () => {

        let [logCard, setlogCard] = useState({
            list: []
        })

        let AppFun = (props) => {
            logCard.list.push(...props, props)
            setlogCard({
                list: logCard.list
            })
        }

        let delectData = (i) => {
            logCard.list.splice(i, 1)
            setlogCard({
                ...logCard,
                list: logCard.list
            })
        }


        return (<div className="logsCard">
            <LogsInput AppFun={AppFun} />

            {logCard.list.length != 0 ? (<div className="logsData">
                {logCard.list.map((item, index) => (
                    <div className="list" key={index}>
                        <div className="list-data">
                            <div className="list-data-Card">
                                <p>{item.data.slice(5, 7)}月</p>
                                <p>{item.data.slice(8, 10)}</p>
                            </div>
                        </div>
                        <div className="list-todo">
                            <p>{item.content}</p>
                            <p>{item.time}min</p>
                            <div
                                onClick={() => delectData(index)}
                                className="todoDelete">x</div>
                        </div>
                    </div>
                ))}
            </div>) : <h1 className="h">没有数据呀</h1>}

        </div>)
    }


    let LogsInput = (props) => {
        let [listData, setlistData] = useState({
            data: '',
            content: '',
            time: ''
        })

        let logdata = (option, event) => {
            setlistData({
                ...listData,
                [option]: event.target.value
            })
        }

        let submitData = () => {
            setlistData({
                ...listData,
                data: '',
                content: '',
                time: ''
            })
            props.AppFun(listData)
        }
        return (<div className="logsInput">

            {
                initInput.map((item, index) => (
                    <form key={index}>
                        <label>{item.label}</label>
                        <input
                            type={item.type}
                            value={listData[item.option]}
                            onChange={logdata.bind(this, item.option)} />
                    </form>
                ))
            }
            <button onClick={submitData}>提交</button>
        </div>)
    }
    node.render(<App />)
</script>

</html>